<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debate Timer</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #1e293b, #0f172a);
    color: #f8fafc;
    padding: 20px;
  }

  h1 {
    margin-bottom: 10px;
    font-size: 2.2em;
  }

  .setup {
    background: rgba(255,255,255,0.1);
    border-radius: 15px;
    padding: 20px;
    display: inline-block;
  }

  .circle-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 40px;
    margin-top: 40px;
  }

  .circle {
    width: 220px;
    height: 220px;
    border-radius: 50%;
    border: 8px solid #38bdf8;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: rgba(255,255,255,0.05);
    box-shadow: 0 0 20px rgba(56,189,248,0.3);
    cursor: pointer;
    transition: transform 0.1s, box-shadow 0.2s;
    position: relative;
  }

  .circle.small {
    width: 150px;
    height: 150px;
    border-width: 6px;
  }

  .circle:hover {
    transform: scale(1.05);
  }

  .active {
    animation: glow 1.2s infinite alternate;
  }

  @keyframes glow {
    0% {
      box-shadow: 0 0 20px rgba(56,189,248,0.5);
      transform: scale(1.05);
    }
    50% {
      box-shadow: 0 0 40px rgba(56,189,248,0.9);
      transform: scale(1.08);
    }
    100% {
      box-shadow: 0 0 30px rgba(56,189,248,0.7);
      transform: scale(1.05);
    }
  }

  .label {
    font-size: 1.1em;
    margin-bottom: 5px;
  }

  .time {
    font-size: 2em;
    font-weight: bold;
  }

  .hidden { display: none; }

  .amendment-setup {
    margin-top: 20px;
  }

  .amendment-setup input {
    width: 60px;
    text-align: center;
    margin: 0 10px;
  }

  .amendment-setup button {
    padding: 5px 15px;
    border-radius: 8px;
    border: none;
    background-color: #22c55e;
    color: white;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>üó£Ô∏è Debate Timer</h1>

<div id="setup" class="setup">
  <h2>Resolution Setup Times (minutes)</h2>
  <p>
    Resolution ‚Äì In Favour: <input type="number" id="resFor" value="5" min="0">
    &nbsp;&nbsp;Resolution ‚Äì Against: <input type="number" id="resAgainst" value="5" min="0">
  </p>
  <button id="beginBtn">Start Debate</button>
</div>

<div id="timerUI" class="hidden">
  <div class="circle-container">
    <div class="circle" id="resForCircle">
      <div class="label">Resolution ‚Äì In Favour</div>
      <div class="time" id="resForTime">00:00</div>
    </div>
    <div class="circle" id="resAgainstCircle">
      <div class="label">Resolution ‚Äì Against</div>
      <div class="time" id="resAgainstTime">00:00</div>
    </div>
  </div>

  <div class="circle-container">
    <div class="circle small" id="amForCircle">
      <div class="label">Amendment ‚Äì In Favour</div>
      <div class="time" id="amForTime">00:00</div>
    </div>
    <div class="circle small" id="amAgainstCircle">
      <div class="label">Amendment ‚Äì Against</div>
      <div class="time" id="amAgainstTime">00:00</div>
    </div>
  </div>

  <div class="amendment-setup">
    <label>Amendment ‚Äì In Favour: <input type="number" id="amForInput" value="3" min="0"></label>
    <label>Amendment ‚Äì Against: <input type="number" id="amAgainstInput" value="3" min="0"></label>
    <button id="resetAm">Reset Amendment Timers</button>
  </div>
</div>

<script>
const timers = [
  { id: "resForTime", label: "Resolution ‚Äì In Favour", minutes: 0, interval: null, running: false, fixed:true },
  { id: "resAgainstTime", label: "Resolution ‚Äì Against", minutes: 0, interval: null, running: false, fixed:true },
  { id: "amForTime", label: "Amendment ‚Äì In Favour", minutes: 0, interval: null, running: false, fixed:false },
  { id: "amAgainstTime", label: "Amendment ‚Äì Against", minutes: 0, interval: null, running: false, fixed:false }
];

function formatTime(sec) {
  const m = Math.floor(sec / 60);
  const s = sec % 60;
  return `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

function updateDisplay(index) {
  document.getElementById(timers[index].id).textContent = formatTime(timers[index].remaining);
}

function stopAllTimers() {
  timers.forEach(t => {
    const circle = document.getElementById(t.id).parentElement;
    circle.classList.remove("active");
    if(t.interval){
      clearInterval(t.interval);
      t.interval = null;
      t.running = false;
    }
  });
}

function toggleTimer(index) {
  const t = timers[index];
  const circle = document.getElementById(t.id).parentElement;
  if(t.remaining <= 0) return;

  if(t.running){
    clearInterval(t.interval);
    t.interval = null;
    t.running = false;
    circle.classList.remove("active");
  } else {
    stopAllTimers();
    t.running = true;
    circle.classList.add("active");
    t.interval = setInterval(() => {
      if(t.remaining > 0){
        t.remaining--;
        updateDisplay(index);
      } else {
        clearInterval(t.interval);
        t.interval = null;
        t.running = false;
        circle.classList.remove("active");
        updateDisplay(index);
        alert(`‚è∞ Time's up for ${t.label}`);
      }
    }, 1000);
  }
}

document.getElementById("beginBtn").addEventListener("click", () => {
  // Fixed resolution timers
  timers[0].minutes = parseInt(document.getElementById("resFor").value)||0;
  timers[1].minutes = parseInt(document.getElementById("resAgainst").value)||0;

  timers.forEach((t,index) => {
    if(t.fixed){ // Resolution timers
      t.remaining = t.minutes*60;
      t.interval = null;
      t.running = false;
      updateDisplay(index);
    }
  });

  // Initialize Amendment timers
  timers[2].minutes = parseInt(document.getElementById("amForInput").value)||3;
  timers[3].minutes = parseInt(document.getElementById("amAgainstInput").value)||3;
  timers[2].remaining = timers[2].minutes*60;
  timers[3].remaining = timers[3].minutes*60;
  updateDisplay(2);
  updateDisplay(3);

  document.getElementById("setup").classList.add("hidden");
  document.getElementById("timerUI").classList.remove("hidden");
});

// Reset Amendment timers independently
document.getElementById("resetAm").addEventListener("click", () => {
  timers[2].minutes = parseInt(document.getElementById("amForInput").value)||3;
  timers[3].minutes = parseInt(document.getElementById("amAgainstInput").value)||3;
  timers[2].remaining = timers[2].minutes*60;
  timers[3].remaining = timers[3].minutes*60;

  [2,3].forEach(i=>{
    stopAllTimers(); // stop if running
    updateDisplay(i);
  });
});

// Add click events
timers.forEach((t, index)=>{
  const circle = document.getElementById(t.id).parentElement;
  circle.addEventListener("click", ()=>toggleTimer(index));
});
</script>

</body>
</html>
